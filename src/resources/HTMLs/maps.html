<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EMQ - Store Locations</title>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyBFH2S9Cc2jAlala-UA6YXVEt50cEz1TTc"></script>


<script>
    var locations = [
        {lat:37.655508 , lng:-122.070641, label:"25453 Mission Blvd, Hayward, CA 94544"},
        {lat: 37.815671, lng:-122.287572, label:"2107 Poplar St, Oakland, CA 94607"},
        {lat:38.005712 ,lng:-122.089431 ,label:"4596 Pacheco Blvd, Martinez, CA 94553"},
        {lat:37.978347,lng:-122.322537, label:"3139 Garrity Way, Richmond, CA 94806"},
        {lat:37.292759,lng:-121.851698, label:"Goble Lane San Jose, CA 95111"},
        {lat:37.388079,lng:-121.967919, label:"2386 Mission College Blvd Santa Clara, CA 95054"},
        {lat:37.545165,lng:-122.295469 ,label:"Across from 900 Yates Way San Mateo, CA 94403"},
        {lat:37.655331,lng:-122.429529 ,label:"Across from 816 Antoinette Ln South San Francisco, CA 94080"},
        {lat:37.770352,lng:-122.419098 ,label:"1695 Mission St San Francisco, CA 94103"},
        {lat:37.737660, lng:-122.475911,label:"2699 19th Ave San Francisco, CA 94116"}

    ];

    //Angular App Module and Controller
    angular.module('mapsApp', [])
            .controller('MapCtrl', function ($scope) {

                var mapOptions = {
                    zoom: 8,
                    center: new google.maps.LatLng(37.5655688, -122.0693672)
                }

                $scope.map = new google.maps.Map(document.getElementById('map'), mapOptions);

                $scope.markers = [];

                var infoWindow = new google.maps.InfoWindow();

                var createMarker = function (info){

                    var marker = new google.maps.Marker({
                        map: $scope.map,
                        position: new google.maps.LatLng(info.lat, info.lng)
                    });
                    marker.content = '<div class="infoWindowContent">' + info.label + '</div>';

                    google.maps.event.addListener(marker, 'click', function(){
                        infoWindow.setContent('<h2>' + marker.title + '</h2>' + marker.content);
                        infoWindow.open($scope.map, marker);
                    });

                    $scope.markers.push(marker);

                }

                for (i = 0; i < locations.length; i++){
                    createMarker(locations[i]);
                }

                $scope.openInfoWindow = function(e, selectedMarker){
                    e.preventDefault();
                    google.maps.event.trigger(selectedMarker, 'click');
                }

            });
</script>

 <style>
     #map {
         height:600px;
         width:100%;
     }
     .infoWindowContent {
         font-size:  14px !important;
         border-top: 1px solid #ccc;
         padding-top: 10px;
     }
     h2 {
         margin-bottom:0;
         margin-top: 0;
     }


 </style>


</head>

<body>
    <div ng-app="mapsApp" ng-controller="MapCtrl">
        <div id="map"></div>
        <div id="class" ng-repeat="marker in markers | orderBy : 'title'">
            <a href="#" ng-click="openInfoWindow($event, marker)">{{marker.label}}</a>
    </div>
</div>

</body>
</html>